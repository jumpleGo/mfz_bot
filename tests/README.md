# –¢–µ—Å—Ç—ã –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Ç–∞—Ä–∏—Ñ–æ–≤

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
npm install --save-dev jest
```

## üß™ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

### –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã
```bash
npm test
```

### –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫–æ–¥–∞
```bash
npm run test:coverage
```

### –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã –≤ watch-—Ä–µ–∂–∏–º–µ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤)
```bash
npm run test:watch
```

### –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª
```bash
npm test dateUtils.test.js
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

```
tests/
‚îú‚îÄ‚îÄ dateUtils.test.js                        # –¢–µ—Å—Ç—ã —É—Ç–∏–ª–∏—Ç —Ä–∞–±–æ—Ç—ã —Å –¥–∞—Ç–∞–º–∏
‚îú‚îÄ‚îÄ reminderService.test.js                  # –¢–µ—Å—Ç—ã —Å–µ—Ä–≤–∏—Å–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
‚îú‚îÄ‚îÄ tariffAvailability.integration.test.js   # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
‚îî‚îÄ‚îÄ README.md                                # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## üìã –û–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤

### 1. `dateUtils.test.js`

–¢–µ—Å—Ç–∏—Ä—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å –¥–∞—Ç–∞–º–∏ –∏ –≤—Ä–µ–º–µ–Ω–µ–º:

- **getMoscowDate()** - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ –ú–°–ö
- **isAltsWatcherAvailable()** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Ç–∞—Ä–∏—Ñ–∞ (26-27 —á–∏—Å–ª–∞)
- **getNextAltsWatcherDate()** - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ª–µ–¥—É—é—â–µ–π –¥–∞—Ç—ã –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
- **getNextReminderDate()** - –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞—Ç—ã –¥–ª—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è (25 —á–∏—Å–ª–æ 18:00)
- **isCloseToOpening()** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –±–ª–∏–∑–æ—Å—Ç–∏ –∫ –æ—Ç–∫—Ä—ã—Ç–∏—é (25 —á–∏—Å–ª–æ –ø–æ—Å–ª–µ 18:00)
- **getTimeUntilOpening()** - —Ä–∞—Å—á–µ—Ç –≤—Ä–µ–º–µ–Ω–∏ –¥–æ –Ω–∞—á–∞–ª–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
- **formatDateForUser()** - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–µ—Å—Ç–æ–≤:** 30+

### 2. `reminderService.test.js`

–¢–µ—Å—Ç–∏—Ä—É–µ—Ç —Å–µ—Ä–≤–∏—Å —Ä–∞–±–æ—Ç—ã —Å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è–º–∏:

- **createReminder()** - —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
- **getRemindersToSend()** - –ø–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –∫ –æ—Ç–ø—Ä–∞–≤–∫–µ
- **markReminderAsSent()** - –æ—Ç–º–µ—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–≥–æ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
- **hasActiveReminder()** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π

**–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–µ—Å—Ç–æ–≤:** 20+

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –º–æ–∫–∏ Firebase –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤
- –¢–µ—Å—Ç–∏—Ä—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö

### 3. `tariffAvailability.integration.test.js`

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Å–µ—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ —Ä–∞–±–æ—Ç—ã:

**–°—Ü–µ–Ω–∞—Ä–∏–∏:**
1. –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–∫—É–ø–∫–∏ –¥–æ –ø–µ—Ä–∏–æ–¥–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ (20 –¥–µ–∫–∞–±—Ä—è)
2. –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–∫—É–ø–∫–∏ 25 –¥–µ–∫–∞–±—Ä—è –¥–æ 18:00
3. –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–∫—É–ø–∫–∏ 25 –¥–µ–∫–∞–±—Ä—è 20:00 (–ø–æ–∫–∞–∑ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å—á–µ—Ç–∞: 4 —á–∞—Å–∞)
4. –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–∫—É–ø–∫–∏ 25 –¥–µ–∫–∞–±—Ä—è 22:30 (–æ–±—Ä–∞—Ç–Ω—ã–π –æ—Ç—Å—á–µ—Ç: 1 —á–∞—Å 30 –º–∏–Ω—É—Ç)
5. –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–∫—É–ø–∫–∏ 25 –¥–µ–∫–∞–±—Ä—è 23:45 (–æ–±—Ä–∞—Ç–Ω—ã–π –æ—Ç—Å—á–µ—Ç: 15 –º–∏–Ω—É—Ç)
6. –ü–æ–∫—É–ø–∫–∞ 26 –¥–µ–∫–∞–±—Ä—è (–¥–æ—Å—Ç—É–ø–Ω–æ)
7. –ü–æ–∫—É–ø–∫–∞ 27 –¥–µ–∫–∞–±—Ä—è (–¥–æ—Å—Ç—É–ø–Ω–æ)
8. –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–∫—É–ø–∫–∏ 28 –¥–µ–∫–∞–±—Ä—è (–Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ)
9. –ü–µ—Ä–µ—Ö–æ–¥ –º–µ—Å—è—Ü–∞ (31 –¥–µ–∫–∞–±—Ä—è ‚Üí 26 —è–Ω–≤–∞—Ä—è)
10. –ì—Ä–∞–Ω–∏—á–Ω—ã–π —Å–ª—É—á–∞–π: 26 —á–∏—Å–ª–æ 00:00 (–¥–æ—Å—Ç—É–ø–Ω–æ)
11. –ì—Ä–∞–Ω–∏—á–Ω—ã–π —Å–ª—É—á–∞–π: 27 —á–∏—Å–ª–æ 23:59 (–¥–æ—Å—Ç—É–ø–Ω–æ)
12. –ì—Ä–∞–Ω–∏—á–Ω—ã–π —Å–ª—É—á–∞–π: 28 —á–∏—Å–ª–æ 00:00 (–Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ)
13. –§–µ–≤—Ä–∞–ª—å (–∫–æ—Ä–æ—Ç–∫–∏–π –º–µ—Å—è—Ü)

**–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–µ—Å—Ç–æ–≤:** 40+

## ‚úÖ –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞

–¶–µ–ª—å –ø–æ–∫—Ä—ã—Ç–∏—è: **70%** –¥–ª—è –≤—Å–µ—Ö –º–µ—Ç—Ä–∏–∫:
- –í–µ—Ç–≤–ª–µ–Ω–∏—è (branches)
- –§—É–Ω–∫—Ü–∏–∏ (functions)
- –°—Ç—Ä–æ–∫–∏ (lines)
- –í—ã—Ä–∞–∂–µ–Ω–∏—è (statements)

## üîç –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –≤—ã–≤–æ–¥–æ–º
```bash
npm test -- --verbose
```

### –ó–∞–ø—É—Å–∫ —Ç–æ–ª—å–∫–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
```bash
npm test tariffAvailability.integration.test.js
```

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ –æ –ø–æ–∫—Ä—ã—Ç–∏–∏ –≤ HTML
```bash
npm run test:coverage
# –û—Ç–∫—Ä–æ–π—Ç–µ coverage/lcov-report/index.html –≤ –±—Ä–∞—É–∑–µ—Ä–µ
```

### –ó–∞–ø—É—Å–∫ –≤ CI/CD
```bash
npm test -- --ci --coverage --maxWorkers=2
```

## üêõ –û—Ç–ª–∞–¥–∫–∞ —Ç–µ—Å—Ç–æ–≤

–î–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞:

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ç–µ—Å—Ç —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º
npm test -- --testNamePattern="–¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å true –¥–ª—è 26 —á–∏—Å–ª–∞"
```

## üìä –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞ —Ç–µ—Å—Ç–æ–≤

```
PASS  tests/dateUtils.test.js
  dateUtils
    getMoscowDate
      ‚úì –¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –¥–∞—Ç—É –≤ –º–æ—Å–∫–æ–≤—Å–∫–æ–º –≤—Ä–µ–º–µ–Ω–∏ (5 ms)
    isAltsWatcherAvailable
      ‚úì –¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å true –¥–ª—è 26 —á–∏—Å–ª–∞ (3 ms)
      ‚úì –¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å true –¥–ª—è 27 —á–∏—Å–ª–∞ (2 ms)
      ‚úì –¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å false –¥–ª—è 25 —á–∏—Å–ª–∞ (2 ms)
    ...

PASS  tests/reminderService.test.js
PASS  tests/tariffAvailability.integration.test.js

Test Suites: 3 passed, 3 total
Tests:       90 passed, 90 total
Snapshots:   0 total
Time:        3.456 s
```

## üîß –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤

1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Ñ–∞–π–ª `*.test.js` –≤ –ø–∞–ø–∫–µ `tests/`
2. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ —Ç–µ—Å—Ç–∏—Ä—É–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É `describe` –∏ `it` –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

–ü—Ä–∏–º–µ—Ä:
```javascript
const { myFunction } = require('../utils/myModule');

describe('myModule', () => {
  describe('myFunction', () => {
    it('–¥–æ–ª–∂–Ω–∞ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –æ–∂–∏–¥–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ', () => {
      const result = myFunction(input);
      expect(result).toBe(expectedOutput);
    });
  });
});
```

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í—Å–µ —Ç–µ—Å—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç **–º–æ—Å–∫–æ–≤—Å–∫–æ–µ –≤—Ä–µ–º—è (UTC+3)**
- –¢–µ—Å—Ç—ã –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã –∏ –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ —Ä–µ–∞–ª—å–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –º–æ–∫–∏ –¥–ª—è Firebase –∏ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –¢–µ—Å—Ç—ã –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
